<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–±—ã—Ç–∏—è - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è–º–∏</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéØ</text></svg>">
    <link rel="stylesheet" href="/css/app.min.css">
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏</h1>
        <div class="user-info">
            <div class="user-badge" id="user-badge">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <a href="/" class="back-btn">‚Üê –ö —Å–ø–∏—Å–∫—É</a>
        </div>
    </div>

    <nav class="main-nav">
        <a href="/" class="nav-link">üìã –ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏</a>
        <a href="/visitors.html" class="nav-link">‚ûï –î–æ–±–∞–≤–∏—Ç—å</a>
        <a href="/events.html" class="nav-link active">üéØ –°–æ–±—ã—Ç–∏—è</a>
        <a href="/scanner.html" class="nav-link">üì± –°–∫–∞–Ω–µ—Ä</a>
        <a href="/stats.html" class="nav-link">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
        <a href="/admin.html" class="nav-link" id="admin-nav" style="display: none;">üëë –ê–¥–º–∏–Ω</a>
    </nav>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏ -->
    <div class="page-actions">
        <button onclick="events.showCreateForm()" class="primary-btn" id="create-event-btn">
            ‚ûï –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
        </button>
        <button onclick="events.refresh()" class="secondary-btn">
            üîÑ –û–±–Ω–æ–≤–∏—Ç—å
        </button>
    </div>

    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <div class="filters-section">
        <select id="status-filter">
            <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
            <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
            <option value="inactive">–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ</option>
            <option value="completed">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ</option>
            <option value="cancelled">–û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ</option>
        </select>
        <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –º–µ—Å—Ç—É...">
        <button onclick="events.filter()" class="secondary-btn">üîç –ù–∞–π—Ç–∏</button>
        <button onclick="events.resetFilters()" class="secondary-btn">üîÑ –°–±—Ä–æ—Å</button>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π -->
    <div class="events-container">
        <div id="events-list">
            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π...</div>
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π -->
    <div class="events-stats hidden" id="events-stats">
        <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π</h3>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="total-events">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ —Å–æ–±—ã—Ç–∏–π</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="active-events">0</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="total-visitors">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="total-scans">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</div>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è -->
<div id="create-event-modal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h3>‚ûï –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è</h3>
            <button onclick="events.hideCreateForm()" class="close-btn">‚úï</button>
        </div>

        <form id="event-form">
            <div class="form-group">
                <label for="event-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è *</label>
                <input name="name" id="event-name" placeholder="IT-–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è 2024" required>
            </div>

            <div class="form-group">
                <label for="event-description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea name="description" id="event-description" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è" rows="3"></textarea>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="start-date">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ *</label>
                    <input name="start_date" id="start-date" type="date" required>
                </div>
                <div class="form-group">
                    <label for="end-date">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è *</label>
                    <input name="end_date" id="end-date" type="date" required>
                </div>
            </div>

            <div class="form-group">
                <label for="event-location">–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</label>
                <input name="location" id="event-location" placeholder="–ú–æ—Å–∫–≤–∞, –¶–í–ö –≠–∫—Å–ø–æ—Ü–µ–Ω—Ç—Ä">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="max-participants">–ú–∞–∫—Å–∏–º—É–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</label>
                    <input name="max_participants" id="max-participants" type="number" min="1" placeholder="–ù–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ">
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input name="registration_required" type="checkbox">
                        –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                    </label>
                </div>
            </div>

            <div class="modal-actions">
                <button type="submit" class="primary-btn">
                    <span class="btn-text">‚úÖ –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ</span>
                    <span class="btn-loading hidden">üîÑ –°–æ–∑–¥–∞–Ω–∏–µ...</span>
                </button>
                <button type="button" onclick="events.hideCreateForm()" class="secondary-btn">
                    ‚ùå –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </form>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–æ–±—ã—Ç–∏—è -->
<div id="event-details-modal" class="modal hidden">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h3 id="event-details-title">üìã –î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è</h3>
            <button onclick="events.hideDetailsModal()" class="close-btn">‚úï</button>
        </div>

        <div id="event-details-content">
            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>

        <div class="modal-actions">
            <button onclick="events.hideDetailsModal()" class="secondary-btn">
                ‚ùå –ó–∞–∫—Ä—ã—Ç—å
            </button>
        </div>
    </div>
</div>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã -->
<script src="/js/utils.js"></script>
<script src="/js/auth.js"></script>
<script src="/js/events.js"></script>
<script src="/js/app.js"></script>

<script>
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç
    document.getElementById('start-date').addEventListener('change', function() {
        const endDate = document.getElementById('end-date');
        endDate.min = this.value;

        if (endDate.value && endDate.value < this.value) {
            endDate.value = this.value;
        }
    });

    document.getElementById('end-date').addEventListener('change', function() {
        const startDate = document.getElementById('start-date');
        if (this.value < startDate.value) {
            utils.showAlert('error', '–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–Ω—å—à–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞');
            this.value = startDate.value;
        }
    });

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É –∫–∞–∫ —Å–µ–≥–æ–¥–Ω—è
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('start-date').min = today;
    document.getElementById('end-date').min = today;

    // –ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π —Å debounce
    document.getElementById('search-input').addEventListener('input',
        utils.debounce(() => events.filter(), 500)
    );
</script>
<script src="/js/responsive-tables.js"></script>
</body>
</html>